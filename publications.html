<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Publications | Chloe Neufeld</title>
  <link rel="stylesheet" href="styles.css">
  <script>
    function toggleAbstract(id, button) {
      const element = document.getElementById(id);
      if (element.style.display === "none") {
        element.style.display = "block";
        button.textContent = "Less";
      } else {
        element.style.display = "none";
        button.textContent = "More";
      }
    }

    function formatAuthors(authors) {
        return authors
            .map(name => {
            const nameLower = name.toLowerCase();
            const [last, first] = name.split(',').map(s => s.trim());
            const formattedName = first && last ? `${first} ${last}` : name;

            const fullLower = formattedName.toLowerCase();
            if (
                fullLower.includes("neufeld c") ||
                fullLower.includes("chloe neufeld") ||
                fullLower.includes("neufeld chloe")
            ) {
                return `<strong>${formattedName}</strong>`;
            }
            return formattedName;
            })
            .join(", ");
        }

    function createPaperHTML(paper, index) {
      return `
        <li class="publication-item">
          <p>${paper.title}</p>
          <hr>
          <p><i>${formatAuthors(paper.authors)} (${paper.year})</i></p>
          <button class="more-btn" onclick="toggleAbstract('abstract${index}', this)">More</button>
          <div class="abstract-box" id="abstract${index}" style="display: none;">
            <p><strong>Abstract:</strong> ${paper.abstract}</p>
            <a href="https://ui.adsabs.harvard.edu/abs/${paper.bibcode}" class="ads-button" target="_blank">ADS</a>
          </div>
        </li>
      `;
    }

    async function loadPublications() {
      const res = await fetch("publications.json");
      const data = await res.json();

      const firstList = document.getElementById("first-author-list");
      const nthList = document.getElementById("nth-author-list");

      data.first_author.forEach((paper, i) => {
        firstList.innerHTML += createPaperHTML(paper, `fa${i}`);
      });

      data.nth_author.forEach((paper, i) => {
        nthList.innerHTML += createPaperHTML(paper, `na${i}`);
      });
    }

    window.onload = loadPublications;
  </script>
</head>
<body>
  <header>
    <div class="logo"><a href="/">chloeneufeld@github.io</a></div>
    <nav>
      <ul>
        <li><a href="/about.html">~/about</a></li>
        <li><a href="/publications.html">~/publications</a></li>
        <li><a href="/projects.html">~/projects</a></li>
        <li><a href="/community.html">~/community</a></li>
        <li><a href="/cv.html">~/cv</a></li>
      </ul>
    </nav>
  </header>

  <main class="publications-section">
    <h1>Publications</h1>
    <p><i><a href="https://ui.adsabs.harvard.edu/public-libraries/JrWTBTT0R_OM1UiDMzSQ7w">full list of publications here</a></i></p>

    <h2>First / Co-First Author Papers</h2>
    <ul class="publications-list" id="first-author-list"></ul>

    <h2>Nth-Author Papers</h2>
    <ul class="publications-list" id="nth-author-list"></ul>
  </main>

  <footer>
    <p>
      <a href="https://github.com/chloeneufeld" target="_blank">GitHub</a> |
      <a href="https://bsky.app/profile/chloeneufeld.bsky.social" target="_blank">Bluesky</a> |
      <a href="mailto:chloe.neufeld@yale.edu">Email</a>
    </p>
  </footer>
</body>
</html>
